= Benutzerhandbuch

:imagesdir: benutzerhandbuch

== Installation
=== Konfiguration des Apache Servers
Es ist möglich und vorgesehen, dass die Anwendung hinter einem als _Reverse Proxy_ konfigurierten Apache Server läuft. Das hat den Vorteil, dass sie einfacher für den Benutzer vom lokalen Netzwerk aus erreichbar ist. Im folgenden Abschnitt wird die Konfiguration eines Apache Servers für FIS angegeben.

Abhängig von der Apache Version und vom Betriebssystem kann die Konfiguration des Webservers eine einzelne Datei (meistens 'httpd.conf') umfassen  oder in mehreren Dateien aufgeteilt sein. Bei Unsicherheit fragen Sie Ihren Systemadministratoren. Zuerst müssen die benötigten zusätlichen Module aktiviert werden. Dies geschieht durch das Hinzufügen folgender Zeilen zu der Konfiguration, falls sie noch nicht vorhanden sind:

[source,conf]
----
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule proxy_html_module modules/mod_proxy_html.so
LoadModule headers_module modules/mod_headers.so
LoadModule filter_module modules/mod_filter.so
LoadModule deflate_module modules/mod_deflate.so
----

Dann muss das eigentliche Proxy auch konfiguriert werden:

[source,conf]
----
ProxyRequests off # <1>
ProxyPass /fis http://localhost:8080 # <2>
ProxyPassReverse /fis http://localhost:8080
<Location "/fis">
  SetOutputFilter proxy-html
  ProxyHTMLURLMap ^/(.*)$ /fis/$1 R
  ProxyHTMLDocType "<!DOCTYPE html>" # <3>
  Order allow,deny
  Allow from all
</Location>
----
<1> Aus Sicherheitsgründen soll diese Einstellung immer `off` sein.
<2> Der erste Parameter bestimmt den Pfad, unter dem die Anwendung erreichbar sein wird (in diesem Fall 'http://<Adresse-des-Apache-Servers>/fis'), und kann nach Belieben verändert werden. Wichtig ist, dass der gleiche Pfad überall in der Konfigurationsdatei  benutzt wird. Der zweite Parameter ist die URL des internen Tomcat-Servers und soll nicht verändert werden.
<3> Stellt sicher, dass HTML5 korrekt angezeigt wird.

== Konfiguration
== Programmstart

[source,conf]
Der Start des Programms erfolgt über die Kommandozeile
----
java -jar fis.jar
----

== Benutzung
Die Benutzeroberfläche des FIS unterteilt sich in 4 verschiedene Registerkarten (Tabs).

=== Abfahrten und Ankünfte

Hier werden die abfahrenden bzw. ankommenden Züge innerhalb des ausgewählten Zeitraumes angezeigt.
image::dep_1.png[Abfahrten, 80%, title="Übersicht Abfahrtsanzeige"]

Am Anfang muss ein Bahnhof ausgewählt werden, für den die Anzeige erfolgen soll. Das Auswählen des Bahnhofs geschieht über die Suchleiste am oberen Bildschirmrand. Durch einen Klick auf den Pfeil rechts von der Suche erhält man eine Liste von allen verfügbaren Bahnhöfen. Der entsprechende Bahnhof muss dann nur noch angeklickt werden.
Alternativ kann der Name des Bahnhofs auch in die Suchmaske eingefügt werden. Es werden dann passende Bahnhöfe vorgeschlagen. Ein Klick auf "Anzeigen" oder die Enter-Taste wählen in diesem Fall den Bahnhof aus.

image::dep_3.png[Tabelle Abfahrten, 100%, title="Tabelle Abfahrten"]


Hier werden die Filterfunktionen angewendet. Man kann den Zeitraum auswählen, in dem die Abfahrten bzw. Ankünfte angezeigt werden Standardmäßig ist ein Zeitraum von 2 Stunden ausgehend von der aktuellen Laborzeit eingestellt. Zudem werden die anzuzeigenden Zugtypen ausgewählt. Es werden nur Passagierzugtypen zur Auswahl gestellt (nur relevant, wenn von einem Offline-Fahrplan gelesen wird).

image::filter.png[Tabelle Abfahrten, 100%, title="Tabelle Abfahrten"]


image::dep_tab.png[Tabelle Abfahrten, 100%, title="Tabelle Abfahrten"]
 

== Administrationsbereich
