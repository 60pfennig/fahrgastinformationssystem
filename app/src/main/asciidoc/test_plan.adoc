= Test-Plan

Dieser Testplan stellt eine vereinfachte Version der IEEE 829-1998 Vorlage dar.

== Einführung
Wozu dient das Dokument? Zielgruppe?

== Aufbau der Testbezeichner
Die Test-IDs werden nach folgendem Schema benannt:

  * UnitTests:
    [U] - [Bereich] - [Klasse] - [Methode]
  
  * IntegrationTests:
    [I] - [TestNr]

*Beispiele:* 

* U-Data-TrainRoute-1
* U-XML-railml2data-1
* I-1


== Test Gegenstände

== Zu testende Funktionalitäten
* Datenstruktur
  -> umfasst die Klassen TimetableController, TimetableData, Station, Stop, TrainRoute, TrainCategory
* Parsen der RailML und Einbringen in die eigene Datenstruktur
* Teile des FisControllers (z.B. String-Ausgabe)
* Kommunikation mit dem Fahrplanserver über die Telegramme
* Konfigurationsmöglichkeiten (bspw. Server-IP)

== Nicht zu testende Funktionalitäten
*RailML-Schemaklassen und der eigentliche Parser (Ausnahme: Ansprechen des Parsers)
*GUI (Ausnahme: FisController)
*sämtliche Spring-Funktionalitäten (bspw. der lokale Webserver)

== Herangehensweise

*Die Klassen werden mit JUnit getestet.
*Die Integrationstests verlaufen nach Bottom-Up Prinzip, d.h. wenn das Zusammenspiel von einzelnen Subsystemen klappt,
werden diese zu größeren Modulen zusammengefasst, die als nächstes getestet werden.

== Umgebungsvoraussetzungen
* Wird spezielle Hardware benötigt?
  -> Abgesehen von der Anwenderhardware, die die Vorraussetzungen für Java8 erfüllt: nein

* Welche Daten müssen bereitgestellt werden? Wie werden die Daten bereitgestellt?
  -> RailML-Fahrplan
  -> Telegramdaten durch einen Telegram-Testserver
* Wird zusätzliche Software für das Testen benötigt?
  -> Es wird ein Testserver benötigt, der dem FIS Telegramme senden kann
* Wie kommuniziert die Software während des Testens? Internet? Netzwerk?
  -> Die Kommunikation erfolgt während des Testens vorerst nur zwischen dem Testserver und dem FIS, bzw. zwischen FIS und Browser des Anwenders.
  Während des Testens laufen diese Dinge lokal auf dem gleichen Rechner.

== Testfälle und Verantwortlichkeit
Jede testbezogene Aufgabe muss einem Ansprechpartner zugeordnet werden.

// See http://asciidoctor.org/docs/user-manual/#tables
[options="headers"]
== Unit Tests
Anmerkung: Bei den Vorbedingungen wird nicht extra notiert, wenn eine Instanz der jeweiligen Klasse benötigt wird, weil dies so gut wie immer der Fall ist.

|===
|*ID* |*Methode* |*Anwendungsfall* |*Vorbedingungen* |*Eingabe* |*Ausgabe / zu überprüfende Wirkung*
|*[U-Data-TrainRoute]*|||||
|U-Data-TrainRoute-1 |updateTrainRoute |Zuglauf updaten|-|Neuer Zuglauf|(neuer Zuglauf statt des alten)
|U-Data-TrainRoute-2 |addStop| Halt hinzufügen|-|null|Fehler oder Warnung
|U-Data-TrainRoute-3 |addStop| Halt hinzufügen|-|hinzuzufügender Halt|(neuer Halt muss zur Liste stops hinzugefügt worden sein)
|U-Data-TrainRoute-4 |removeStop| Halt entfernen|-|in der Liste stops enthaltener Halt|Entfernung des Halts aus stops
|U-Data-TrainRoute-5 |removeStop| Halt entfernen|-|in stops nicht enthaltener Halt|nichts
|U-Data-TrainRoute-6 |getLastStop| Endhalt abfragen|-|-|letzter Eintrag von stops
|U-Data-TrainRoute-7 |getFirstStop| Beginn-Halt abfragen|-|-|erster Eintrag von stops
|*[U-Data-Stop]*|||||
|U-Data-Stop-1|(new Stop)|Erzeugen des Stops|-|Abfahrt, Ankunft, Gleis, Bahnhof (geplant)|korrektes Speichern in den vorgesehenen Variablen
|U-Data-Stop-2 |set XY| Updaten des Haltes (durch Telegramme verursacht)|-|neue Zeiten, Gleis, Meldung|korrektes Speichern in den vorgesehenen Variablen
|*[U-Data-Station]*|||||
|U-Data-Station-1|addStop|Halt hinzufügen|-|null|Fehler/Warnung
|U-Data-Station-2|addStop|Halt hinzufügen|-|hinzuzufügender Halt|(neuer Halt muss zur Liste stops hinzugefügt werden)
|U-Data-Station-3|removeStop|Halt entfernen|-|null / nicht in stops enthaltener Halt|nichts
|U-Data-Station-4|removeStop|Halt entfernen|-|zu entfernender Halt|Entfernen des Haltes aus stops
|*[U-Data-TimetableData]*|||||
|U-Data-TimetableData-1|getStationByName|Bahnhof mit Namen suchen|-|Name (enthalten)|erster Bahnhof in der Liste mit entspr. Namen
|U-Data-TimetableData-2|getStationByName|Bahnhof mit Namen suchen|-|Name (nicht enthalten)|null
|U-Data-TimetableData-3|getStationByCode|Bahnhof mit ID suchen|-|ID (enthalten)|erster Bahnhof in der Liste mit entspr. ID
|U-Data-TimetableData-4|getStationByCode|Bahnhof mit ID suchen|-|ID (nicht enthalten)|null
|U-Data-TimetableData-5|getTrainRouteByNumber|Zuglauf mit Nr suchen|-|Nr (enthalten)|erster Zuglauf in der Liste mit entspr. Nr.
|U-Data-TimetableData-6|getTrainRouteByNumber|Zuglauf mit Nr suchen|-|Nr (nicht enthalten)|null
|U-Data-TimetableData-7|getTrainRouteByDestination|Nach Endbahnhof filtern|-|Bahnhof|Alle Zugläufe, die im gegebenen Bahnhof enden
|U-Data-TimetableData-8|addStop|Halt zum Plan hinzufügen|-|null|Fehler/Warnung
|U-Data-TimetableData-9|addStop|Halt zum Plan hinzufügen|-|Halt|Halt sowohl zu stops hinzufügen, als auch in die Liste stops des entsprechenden Bahnhofs!
|U-Data-TimetableData-10|addStation|Bahnhof zum Plan hinzufügen|-|null|Fehler/Warnung
|U-Data-TimetableData-11|addStation|Bahnhof zum Plan hinzufügen|-|Bahnhof|Hinzufügen des Bahnhofs zu stations
|U-Data-TimetableData-12|addTrainRoute|Zuglauf zum Plan hinzufügen|-|null|Fehler/Warnung
|U-Data-TimetableData-13|addTrainRoute|Zuglauf zum Plan hinzufügen|-|Zuglauf|Hinzufügen des Zuglaufs zu routes
|U-Data-TimetableData-14|addCategory|Zugkategorie zum Plan hinzufügen|-|null|Fehler/Warnung
|U-Data-TimetableData-15|addCategory|Zugkategorie zum Plan hinzufügen|-|Zugkategorie|Hinzufügen zu trainCategories
|===
